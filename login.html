<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Balance Buddy</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="flex flex-col min-h-screen bg-gray-100">
    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white shadow-md">
      <div class="px-6 mx-auto max-w-7xl sm:px-8 lg:px-10">
        <div class="flex items-center justify-between h-16">
          <!-- Logo -->
          <a href="index.html" class="flex items-center">
            <img
              src="https://tse1.mm.bing.net/th/id/OIP.mMwmkJAohuInWX0nhDrI0AAAAA?rs=1&pid=ImgDetMain&o=7&rm=3"
              alt="Logo"
              class="w-12 h-12 mr-3 rounded-full shadow-sm"
            />
            <span class="text-2xl font-semibold tracking-wide text-pink-600">
              Balance Buddy
            </span>
          </a>

          <!-- Desktop Menu -->
          <div
            class="items-center hidden space-x-6 font-medium text-pink-600 md:flex"
          >
            <a href="about.html" class="transition hover:text-pink-400"
              >About Us</a
            >
            <a href="experts.html" class="transition hover:text-pink-400"
              >Our Experts</a
            >
            <a href="services.html" class="transition hover:text-pink-400"
              >Services</a
            >
            <a href="mindgym.html" class="transition hover:text-pink-400"
              >Mind Gym</a
            >
            <a href="team.html" class="transition hover:text-pink-400"
              >Join Our Team</a
            >
            <a href="contact.html" class="transition hover:text-pink-400"
              >Contact</a
            >
            <a
              href="login.html"
              class="px-5 py-2 font-semibold text-white transition rounded-full"
              style="background-color: #017b92"
            >
              Login
            </a>
            <!-- Language Selector -->
            <select
              class="px-2 py-1 ml-2 text-sm border border-gray-300 rounded"
            >
              <option>English</option>
              <option>සිංහල</option>
              <option>தமிழ்</option>
            </select>
          </div>

          <!-- Mobile Hamburger Menu -->
          <button
            id="menu-toggle"
            class="text-pink-600 md:hidden focus:outline-none"
            aria-label="Toggle menu"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              />
            </svg>
          </button>
        </div>
      </div>

      <!-- Mobile Menu Items -->
      <div id="mobile-menu" class="hidden px-6 pb-4 md:hidden">
        <div class="flex flex-col space-y-3 font-medium text-pink-600">
          <a href="about.html" class="hover:text-pink-400">About Us</a>
          <a href="experts.html" class="hover:text-pink-400">Our Experts</a>
          <a href="services.html" class="hover:text-pink-400">Services</a>
          <a href="mindgym.html" class="hover:text-pink-400">Mind Gym</a>
          <a href="team.html" class="hover:text-pink-400">Join Our Team</a>
          <a href="contact.html" class="hover:text-pink-400">Contact</a>
          <a
            href="login.html"
            class="px-4 py-2 text-white bg-pink-600 rounded-full hover:bg-pink-500"
          >
            Login
          </a>
          <select
            class="w-full px-2 py-1 text-sm border border-gray-300 rounded"
          >
            <option>English</option>
            <option>සිංහල</option>
            <option>தமிழ்</option>
          </select>
        </div>
      </div>
    </nav>

    <!-- Login Form Centered -->
    <div class="flex items-center justify-center flex-grow px-4">
      <div
        class="w-full max-w-md p-8 bg-white border-t-4 shadow-xl rounded-xl"
        style="border-color: #017b92"
      >
        <h2 class="text-2xl font-bold text-center text-[#017B92] mb-6">
          Welcome Back
        </h2>

        <form id="loginForm" method="POST" action="login.php" novalidate>
          <!-- Email -->
          <div class="mb-4">
            <label for="email" class="block mb-1 font-semibold text-gray-700"
              >Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="you@example.com"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#017B92]"
            />
            <p class="hidden mt-1 text-sm text-red-500" id="emailError">
              Please enter a valid email.
            </p>
          </div>

          <!-- Password -->
          <div class="mb-4">
            <label for="password" class="block mb-1 font-semibold text-gray-700"
              >Password</label
            >
            <input
              type="password"
              id="password"
              name="password"
              required
              minlength="6"
              placeholder="••••••••"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#017B92]"
            />
            <p class="hidden mt-1 text-sm text-red-500" id="passwordError">
              Password must be at least 6 characters.
            </p>
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full py-2 px-4 bg-[#017B92] text-white font-semibold rounded-lg hover:bg-[#026c7f] transition"
          >
            Login
          </button>
        </form>

        <!-- Extra Links -->
        <div class="mt-4 text-sm text-center text-gray-600">
          <a href="#" class="hover:underline text-[#017B92]"
            >Forgot Password?</a
          >
          |
          <!-- Link to Register -->
          <p class="mt-6 text-center text-gray-600">
            Don’t have an account?
            <a
              href="registration.html"
              class="font-semibold text-teal-600 hover:underline"
            >
              Create an Account
            </a>
          </p>
        </div>
      </div>
    </div>

    <script>
            const form = document.getElementById("loginForm");
            const email = document.getElementById("email");
            const password = document.getElementById("password");
            const emailError = document.getElementById("emailError");
            const passwordError = document.getElementById("passwordError");

            // Create a message container if not already in HTML
            let noAccountMessage = document.getElementById("noAccountMessage");
            if (!noAccountMessage) {
              noAccountMessage = document.createElement("p");
              noAccountMessage.id = "noAccountMessage";
              noAccountMessage.className = "mt-2 text-sm text-red-500 hidden";
              form.appendChild(noAccountMessage);
            }

            form.addEventListener("submit", function (e) {
              e.preventDefault();

              let valid = true;

              if (!email.validity.valid) {
                emailError.classList.remove("hidden");
                valid = false;
              } else {
                emailError.classList.add("hidden");
              }

              if (!password.validity.valid) {
                passwordError.classList.remove("hidden");
                valid = false;
              } else {
                passwordError.classList.add("hidden");
              }

              if (valid) {
                const formData = new FormData(form);

                fetch("login.php", {
                  method: "POST",
                  body: formData,
                })
                  .then((res) => res.json())
                  .then((data) => {
                    iif (data.status === "success") {
          // Redirect to homepage if login is successful
          window.location.href = "index.html";
      }
       else {
                      // Show error message
                      noAccountMessage.textContent = data.message;
                      noAccountMessage.classList.remove("hidden");
                    }
                  })
                  .catch((err) => {
                    console.error(err);
                    noAccountMessage.textContent =
                      "Something went wrong. Please try again.";
                    noAccountMessage.classList.remove("hidden");
                  });
              }
            });
    </script>
  </body>
</html>
